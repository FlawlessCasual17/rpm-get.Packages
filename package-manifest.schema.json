{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Package Manifest Schema",
  "description": "Schema for package manifests",
  "type": "object",
  "required": [
    "supported_os",
    "version",
    "name",
    "license",
    "description",
    "homepage",
    "arch"
  ],
  "properties": {
    "supported_os": {
      "type": "array",
      "description": "List of operating systems (that use RPM) supported by this package",
      "minItems": 1,
      "maxItems": 100,
      "items": {
        "type": "string",
        "examples": [
          "all",
          "fedora",
          "centos",
          "rocky",
          "alma",
          "rhel",
          "amazon-linux",
          "openSUSE-tumbleweed",
          "openSUSE-leap",
          "nobara"
        ]
      }
    },
    "version": {
      "type": "string",
      "description": "Package version"
    },
    "name": {
      "type": "string",
      "description": "Package name"
    },
    "license": {
      "anyOf": [
        {
          "type": "string",
          "description": "Package license based on SPDX license format, and license list: https://spdx.org/licenses/",
          "examples": [
            "Apache-2.0",
            "BSD-3-Clause",
            "Freeware",
            "GPL-2.0",
            "GPL-2.0-only",
            "GPL-2.0-or-later",
            "GPL-3.0-only",
            "GPL-3.0-or-later",
            "GPL-3.0",
            "ISC",
            "LGPL-2.0-only",
            "LGPL-2.0-or-later",
            "LGPL-2.1-only",
            "LGPL-2.1-or-later",
            "LGPL-3.0-only",
            "LGPL-3.0-or-later",
            "MIT",
            "MS-PL",
            "Proprietary",
            "Public Domain",
            "Shareware",
            "Unlicense"
          ]
        },
        {
          "type": "object",
          "description": "Package license based on SPDX license format, and license list: https://spdx.org/licenses/",
          "properties": {
            "identifier": {
              "type": "string",
              "description": "License identifier",
              "examples": [
                "Apache-2.0",
                "BSD-3-Clause",
                "Freeware",
                "GPL-2.0",
                "GPL-2.0-only",
                "GPL-2.0-or-later",
                "GPL-3.0-only",
                "GPL-3.0-or-later",
                "GPL-3.0",
                "ISC",
                "LGPL-2.0-only",
                "LGPL-2.0-or-later",
                "LGPL-2.1-only",
                "LGPL-2.1-or-later",
                "LGPL-3.0-only",
                "LGPL-3.0-or-later",
                "MIT",
                "MS-PL",
                "Proprietary",
                "Public Domain",
                "Shareware",
                "Unlicense"
              ]
            },
            "url": {
              "type": "string",
              "description": "License URL"
            }
          }
        }
      ]
    },
    "homepage": {
      "type": "string",
      "description": "Package homepage"
    },
    "description": {
      "type": "string",
      "description": "Package description"
    },
    "notes": {
      "type": "string",
      "description": "Additional notes about the package"
    },
    "arch": {
      "type": "object",
      "description": "Architecture-specific download information",
      "properties": {
        "x86_64": {
          "type": "object",
          "description": "x86_64 architecture (also works for amd64/64bit)",
          "properties": {
            "url": {
              "type": "string",
              "description": "Download URL for x86_64 architecture"
            },
            "hash": {
              "type": "string",
              "description": "Download hash for x86_64 architecture",
              "pattern": "^([a-fA-F0-9]{64}|(sha1|sha256|sha512|md5):([a-fA-F0-9]{32}|[a-fA-F0-9]{40}|[a-fA-F0-9]{64}|[a-fA-F0-9]{128}))$"
            }
          },
          "required": ["url", "hash"]
        },
        "x86": {
          "type": "object",
          "description": "x86 architecture (also works for i386/32bit)",
          "properties": {
            "url": {
              "type": "string",
              "description": "Download URL for x86 architecture"
            },
            "hash": {
              "type": "string",
              "description": "Download hash for x86 architecture",
              "pattern": "^([a-fA-F0-9]{64}|(sha1|sha256|sha512|md5):([a-fA-F0-9]{32}|[a-fA-F0-9]{40}|[a-fA-F0-9]{64}|[a-fA-F0-9]{128}))$"
            }
          },
          "required": ["url", "hash"]
        },
        "arm64": {
          "type": "object",
          "description": "arm64 architecture",
          "properties": {
            "url": {
              "type": "string",
              "description": "Download URL for arm64 architecture"
            },
            "hash": {
              "type": "string",
              "description": "Download hash for arm64 architecture",
              "pattern": "^([a-fA-F0-9]{64}|(sha1|sha256|sha512|md5):([a-fA-F0-9]{32}|[a-fA-F0-9]{40}|[a-fA-F0-9]{64}|[a-fA-F0-9]{128}))$"
            }
          },
          "required": ["url", "hash"]
        },
        "aarch64": {
          "type": "object",
          "description": "aarch64 architecture",
          "properties": {
            "url": {
              "type": "string",
              "description": "Download URL for aarch64 architecture"
            },
            "hash": {
              "type": "string",
              "description": "Download hash for aarch64 architecture",
              "pattern": "^([a-fA-F0-9]{64}|(sha1|sha256|sha512|md5):([a-fA-F0-9]{32}|[a-fA-F0-9]{40}|[a-fA-F0-9]{64}|[a-fA-F0-9]{128}))$"
            }
          },
          "required": ["url", "hash"]
        }
      }
    },
    "repo": {
      "anyOf": [
        {
          "type": "object",
          "description": "Information about an RPM/COPR repository (Will eventually support Zypper repos)",
          "properties": {
            "url": {
              "type": "string",
              "description": "Package repository URL"
            },
            "gpg_key_url": {
              "type": "string",
              "description": "Repository GPG key URL"
            }
          },
          "required": ["url"]
        },
        {
          "type": "object",
          "description": "Information about an RPM/COPR repository (Will eventually support Zypper repos)",
          "properties": {
            "username": {
              "type": "string",
              "description": "Copr user name"
            },
            "project": {
              "type": "string",
              "description": "Copr project name"
            }
          },
          "required": ["user", "project"]
        }
      ]
    },
    "depends": {
      "type": "array",
      "description": "List of package dependencies",
      "items": {
        "type": "string"
      }
    },
    "recommends": {
      "type": "array",
      "description": "List of recommended packages",
      "items": {
        "type": "string"
      }
    },
    "suggests": {
      "type": "array",
      "description": "List of suggested packages",
      "items": {
        "type": "string"
      }
    },
    "conflicts": {
      "type": "array",
      "description": "List of conflicting packages",
      "items": {
        "type": "string"
      }
    },
    "replaces": {
      "type": "array",
      "description": "List of packages that this package replaces",
      "items": {
        "type": "string"
      }
    },
    "provides": {
      "type": "array",
      "description": "List of features this package provides",
      "items": {
        "type": "string"
      }
    },
    "auto_update": {
      "type": "object",
      "description": "Auto-update configuration",
      "properties": {
        "check_version": {
          "type": "object",
          "description": "Configuration for checking package version. If using the `github`/`gitlab` objects, it will try to use the latest version by default. To disable this behavior, set `use_latest` to `false`",
          "properties": {
            "url": {
              "type": "string",
              "description": "URL to check for new versions"
            },
            "jsonpath": {
              "type": "string",
              "description": "JSONPath to extract version information"
            },
            "xpath": {
              "type": "string",
              "description": "XPath to extract version information. Only for HTML and XML"
            },
            "regex": {
              "type": "string",
              "description": "Regular expression to extract version information"
            },
            "use_latest": {
              "type": "boolean",
              "description": "Try to use the latest version. Only works with GitHub, GitLab, GitTea, Gogs, Forgejo, and Codeberg",
              "default": false
            },
            "github": {
              "description": "Can also be used with Gitea, Gogs, Forgejo, and Codeberg.",
              "anyOf": [
                {
                  "type": "string",
                  "description": "Information about a GitHub (Gitea, Gogs, Forgejo, and Codeberg) repository. This must be in the format 'username/repository-name'",
                  "pattern": "^[a-zA-Z0-9_-]+/[a-zA-Z0-9_-]+$"
                },
                {
                  "type": "object",
                  "description": "Information about a GitHub (Gitea, Gogs, Forgejo, and Codeberg) repository",
                  "properties": {
                    "owner": {
                      "type": "string",
                      "description": "Can either be a GitHub username or organization name"
                    },
                    "repo": {
                      "type": "string",
                      "description": "GitHub repository name"
                    }
                  },
                  "required": ["creator", "repo"]
                }
              ]
            },
            "gitlab": {
              "anyOf": [
                {
                  "type": "string",
                  "description": "Information about a GitLab repository. This must be in the format 'group/sub-group/project'",
                  "pattern": "^[a-zA-Z0-9_-]+/[a-zA-Z0-9_-]+/[a-zA-Z0-9_-]+$"
                },
                {
                  "type": "string",
                  "description": "Information about a GitLab repository. This must be in the format 'profile/project'",
                  "pattern": "^[a-zA-Z0-9_-]+/[a-zA-Z0-9_-]+$"
                },
                {
                  "type": "object",
                  "description": "Information about a GitLab repository",
                  "properties": {
                    "group": {
                      "type": "string",
                      "description": "GitLab group name"
                    },
                    "sub_group": {
                      "type": "string",
                      "description": "GitLab sub-group name"
                    },
                    "project": {
                      "type": "string",
                      "description": "GitLab project name"
                    }
                  }
                },
                {
                  "type": "object",
                  "description": "Information about a GitLab repository",
                  "properties": {
                    "profile": {
                      "type": "string",
                      "description": "GitLab profile name"
                    },
                    "project": {
                      "type": "string",
                      "description": "GitLab project name"
                    }
                  }
                }
              ]
            }
          }
        },
        "arch": {
          "type": "object",
          "description": "Architecture-specific auto-update information",
          "properties": {
            "x86_64": {
              "type": "object",
              "description": "x86_64 architecture (also works for amd64/64bit)",
              "properties": {
                "url": {
                  "type": "string",
                  "description": "Auto-update URL for x86_64 architecture"
                },
                "check_hash": {
                  "type": "object",
                  "description": "Configuration for checking package hash",
                  "properties": {
                    "url": {
                      "type": "string",
                      "description": "URL to check for new versions"
                    },
                    "regex": {
                      "type": "string",
                      "description": "Regular expression to extract hash information"
                    }
                  },
                  "required": ["url", "regex"]
                }
              },
              "required": ["url"]
            },
            "x86": {
              "type": "object",
              "description": "x86 architecture (also works for i386/32bit)",
              "properties": {
                "url": {
                  "type": "string",
                  "description": "Auto-update URL for x86 architecture"
                },
                "check_hash": {
                  "type": "object",
                  "description": "Configuration for checking package hash",
                  "properties": {
                    "url": {
                      "type": "string",
                      "description": "URL to check for new versions"
                    },
                    "regex": {
                      "type": "string",
                      "description": "Regular expression to extract hash information"
                    }
                  },
                  "required": ["url", "regex"]
                }
              },
              "required": ["url"]
            },
            "arm64": {
              "type": "object",
              "description": "arm64 architecture",
              "properties": {
                "url": {
                  "type": "string",
                  "description": "Auto-update URL for arm64 architecture"
                },
                "check_hash": {
                  "type": "object",
                  "description": "Configuration for checking package hash",
                  "properties": {
                    "url": {
                      "type": "string",
                      "description": "URL to check for new versions"
                    },
                    "regex": {
                      "type": "string",
                      "description": "Regular expression to extract hash information"
                    }
                  },
                  "required": ["url", "regex"]
                }
              },
              "required": ["url"]
            },
            "aarch64": {
              "type": "object",
              "description": "aarch64 architecture",
              "properties": {
                "url": {
                  "type": "string",
                  "description": "Auto-update URL for aarch64 architecture"
                },
                "check_hash": {
                  "type": "object",
                  "description": "Configuration for checking package hash",
                  "properties": {
                    "url": {
                      "type": "string",
                      "description": "URL to check for new versions"
                    },
                    "regex": {
                      "type": "string",
                      "description": "Regular expression to extract hash information"
                    }
                  },
                  "required": ["url", "regex"]
                }
              },
              "required": ["url"]
            }
          },
          "required": ["check_version", "arch"]
        }
      }
    }
  }
}
